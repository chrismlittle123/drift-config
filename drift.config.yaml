# Drift Configuration for chrismlittle123

# Repositories to exclude from scanning
exclude:
  - "drift-config"
  - "chrismlittle123"
  - "check-my-toolkit-registry-community"
  - "*-template"
  - "*.github.io"

scans:
  # Custom project marker
  - name: has-check-toml
    command: test -f check.toml

  # Required files
  - name: has-readme
    command: test -f README.md

  - name: has-license
    command: test -f LICENSE || test -f LICENSE.md

  - name: has-gitignore
    command: test -f .gitignore

  # Security - no secrets committed
  - name: no-env-files
    command: "! ls .env .env.local .env.production 2>/dev/null | grep -q ."

  # Node.js projects must use pnpm
  - name: has-pnpm-lock
    command: test -f pnpm-lock.yaml
    if: package.json

  # --- CODEOWNERS Protection ---
  # Verify CODEOWNERS exists
  - name: has-codeowners
    command: test -f .github/CODEOWNERS || test -f CODEOWNERS || test -f docs/CODEOWNERS

  # Verify CODEOWNERS protects critical files
  - name: codeowners-protects-check-toml
    command: grep -q "check.toml" .github/CODEOWNERS
    if: .github/CODEOWNERS

  - name: codeowners-protects-eslint
    command: grep -qE "eslint|\.eslintrc" .github/CODEOWNERS
    if: .github/CODEOWNERS
